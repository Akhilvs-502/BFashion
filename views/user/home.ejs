

<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/flowbite/1.6.5/flowbite.min.js"></script>



<%- include('../partials/header') %>


  <div id="default-carousel" class="relative w-full " data-carousel="slide">
    <!-- Carousel wrapper -->
    <div class="relative h-36 lg:78 overflow-hidden rounded-lg md:h-96">
         <!-- Item 1 -->
        <div class="hidden  duration-700 ease-in-out" data-carousel-item>
            <img src="/images/bannercart.gif" class="absolute  w-full h-full -translate-x-1/2 -translate-y-1/2 top-1/2 left-1/2" alt="...">
        </div>
        <!-- Item 2 -->
        <div class="hidden duration-100000 ease-in-out" data-carousel-item>
            <img src="/images/bannercart.gif" class="absolute  w-full h-full -translate-x-1/2 -translate-y-1/2 top-1/2 left-1/2" alt="...">
        </div>
        <!-- Item 3 -->
        <div class="hidden duration-700 ease-in-out" data-carousel-item>
            <img src="/images/bannercart.gif" class="absolute  w-full h-full -translate-x-1/2 -translate-y-1/2 top-1/2 left-1/2" alt="...">
        </div>
        <!-- Item 4 -->
        <div class="hidden duration-700 ease-in-out" data-carousel-item>
            <img src="/images/bannercart.gif" class="absolute block w-full h-full -translate-x-1/2 -translate-y-1/2 top-1/2 left-1/2" alt="...">
        </div>
        <!-- Item 5 -->
        <div class="hidden duration-700 ease-in-out" data-carousel-item>
            <img src="/images/bannercart.gif" class="absolute block w-full h-full -translate-x-1/2 -translate-y-1/2 top-1/2 left-1/2" alt="...">
        </div>
    </div>
    <!-- Slider indicators -->
    <div class="absolute z-30 flex -translate-x-1/2 bottom-5 left-1/2 space-x-3 rtl:space-x-reverse">
        <button type="button" class="w-3 h-3 rounded-full" aria-current="true" aria-label="Slide 1" data-carousel-slide-to="0"></button>
        <button type="button" class="w-3 h-3 rounded-full" aria-current="false" aria-label="Slide 2" data-carousel-slide-to="1"></button>
        <button type="button" class="w-3 h-3 rounded-full" aria-current="false" aria-label="Slide 3" data-carousel-slide-to="2"></button>
        <button type="button" class="w-3 h-3 rounded-full" aria-current="false" aria-label="Slide 4" data-carousel-slide-to="3"></button>
        <button type="button" class="w-3 h-3 rounded-full" aria-current="false" aria-label="Slide 5" data-carousel-slide-to="4"></button>
    </div>
    <!-- Slider controls -->
    <button type="button" class="absolute top-0 start-0 z-30 flex items-center justify-center h-full px-4 cursor-pointer group focus:outline-none" data-carousel-prev>
        <span class="inline-flex items-center justify-center w-10 h-10 rounded-full bg-white/30 dark:bg-gray-800/30 group-hover:bg-white/50 dark:group-hover:bg-gray-800/60 group-focus:ring-4 group-focus:ring-white dark:group-focus:ring-gray-800/70 group-focus:outline-none">
            <svg class="w-4 h-4 text-white dark:text-gray-800 rtl:rotate-180" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 6 10">
                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 1 1 5l4 4"/>
            </svg>
            <span class="sr-only">Previous</span>
        </span>
    </button>
    <button type="button" class="absolute top-0 end-0 z-30 flex items-center justify-center h-full px-4 cursor-pointer group focus:outline-none               " data-carousel-next>
        <span class="inline-flex items-center justify-center w-10 h-10 rounded-full bg-white/30 dark:bg-gray-800/30 group-hover:bg-white/50 dark:group-hover:bg-gray-800/60 group-focus:ring-4 group-focus:ring-white dark:group-focus:ring-gray-800/70 group-focus:outline-none">
            <svg class="w-4 h-4 text-white dark:text-gray-800 rtl:rotate-180" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 6 10">
                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 9 4-4-4-4"/>
            </svg>
            <span class="sr-only">Next</span>
        </span>
    </button>
</div>


<section class="flex flex-col md:flex-row md:space-x-0">
  <!-- Left Column: Women's Fashion (Main Image) -->
  <div class="relative w-full md:w-1/2 h-full ">
    <img src="/images/category-1.jpg" alt="Women's Fashion" class="w-full h-full object-cover ">
    <h2 class="absolute top-4 left-4 text-2xl font-bold text-white">
      Women’s Fashion
    </h2>
    <p class="absolute bottom-16 left-4 text-sm text-white">
      Shop our range of stylish dresses and quality cosmetics for women. Find looks that are both trendy and timeless, perfect for any occasion.
    </p>
    <a href="http://localhost:8000/user/allProducts?men=false&&women=true&&kids=false&&price=false&&sort=false&&stock=false&&newArrivals=false" class="absolute bottom-4 left-4 text-sm font-bold text-blue-400">Shop Now</a>
  </div>

  <!-- Right Column: Grid for Other Categories -->
  <div class="grid grid-cols-2  w-full md:w-1/2">
    <!-- Men's Fashion -->
    <div class="relative">
      <img src="/images/category-2.jpg" alt="Men's Fashion" class="w-full h-full object-cover ">
      <h2 class="absolute top-4 left-4 text-xl font-bold text-white">
        Men's Fashion
      </h2>
      <a href="/user/allProducts?men=true&&women=false&&kids=false&&price=false&&sort=false&&stock=false&&newArrivals=false" class="absolute bottom-4 left-4 text-sm font-bold text-blue-400">Shop Now</a>
    </div>

    <!-- Kids' Fashion -->
    <div class="relative">
      <img src="/images/category-3.jpg" alt="Kids' Fashion" class="w-full h-full object-cover ">
      <h2 class="absolute top-4 left-4 text-xl font-bold text-white">
        Kids' Fashion
      </h2>
      <a href="/user/allProducts?men=false&&women=false&&kids=true&&price=false&&sort=false&&stock=false&&newArrivals=false" class="absolute bottom-4 left-4 text-sm font-bold text-blue-400">Shop Now</a>
    </div>

    <!-- Cosmetics -->
    <div class="relative">
      <img src="/images/category-4.jpg" alt="Cosmetics" class="w-full h-full object-cover ">
      <h2 class="absolute top-4 left-4 text-xl font-bold text-white">
        Cosmetics
      </h2>
      <a href="#" class="absolute bottom-4 left-4 text-sm font-bold text-blue-400">Shop Nows <span class="text-sm text-gray-700" >(out of stock)</span></a>
    </div>

    <!-- Accessories -->
    <div class="relative">
      <img src="/images/category-5 (1).jpg" alt="Accessories" class="w-full h-full object-cover ">
      <h2 class="absolute top-4 left-4 text-xl font-bold text-white">
        Accessories
      </h2>
      <a href="#" class="absolute bottom-4 left-4 text-sm font-bold text-blue-400">Shop Now<span class="text-sm text-gray-700" >(out of stock)</span></a>
    </div>
  </div>
</section>

<section>
  <div class="font-sans p-4 mx-auto lg:max-w-5xl md:max-w-3xl sm:max-w-full">

    <h2 class="text-lg  lg:text-2xl font-extrabold text-gray-800 mb-12">All products</h2>

    <div class="grid grid-cols-2  sm:grid-cols-2 lg:grid-cols-3 gap-6">
      <% products.forEach(product=>{%>
        <!-- <a href="/user/productView/<%=product._id %>"> -->
        <div id="product"
          class="bg-white rounded overflow-hidden shadow-md cursor-pointer hover:scale-[1.02] transition-all">
          <div class="w-full aspect-w-4 aspect-h-3 lg:h-60">
            <img src="<%=product.images[0] %>" alt="Product 1" class="h-full w-full object-cover object-top" />
          </div>

          <div class="p-4">
            <h3 class="text-sm lg:text-lg font-bold text-gray-800">
              <%=product.productName %>
            </h3>
            <p class="text-sm lg:text-lg">
              <%=product.description %>
            </p>
            <div class="mt-4 flex items-center flex-wrap gap-2">
              <h4 class="text-lg font-bold text-gray-800">₹<%=product.price %>
              </h4>
              <h4 class="text-lg font-light line-through text-red-500">
                <%=product.discount %>%
              </h4>
              <!-- <a href="/user/addToWishlist" > -->
              <!-- <div class="float-right"> -->
                <div id="Wishlist"
                  class="bg-gray-100 p-1 w-10 h-10 flex items-center   rounded-full cursor-pointer">



                      <% if (wishlistProduct.some(item=> item.productId.equals(product._id))) { %>

                        <svg  width="300px"   height="500px" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg">
                          <path fill="#FF0000" d="M480.25 156.355c0 161.24-224.25 324.43-224.25 324.43S31.75 317.595 31.75 156.355c0-91.41 70.63-125.13 107.77-125.13 77.65 0 116.48 65.72 116.48 65.72s38.83-65.73 116.48-65.73c37.14.01 107.77 33.72 107.77 125.14z" />
                        </svg>
                        
                          <% } else { %>
                          
                            <svg width="300px" height="500px" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path fill="#E0E0E0" 
                              d="M480.25 156.355c0 161.24-224.25 324.43-224.25 324.43S31.75 317.595 31.75 156.355c0-91.41 70.63-125.13 107.77-125.13 77.65 0 116.48 65.72 116.48 65.72s38.83-65.73 116.48-65.73c37.14.01 107.77 33.72 107.77 125.14z"/></svg>

                              <% } %>

                      
                        <div id="productID" class="hidden">
                          <%=product._id %>
                        </div>
                    </div>
                  <!-- </div> -->
                    <!-- </a> -->

                </div>
            </div>
          </div>
          <!-- </a> -->
          <%}) %>




        </div>
    </div>

</section>









</section>

<%- include('../partials/footer') %>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script>
          document.querySelectorAll("#product").forEach(results=>results.addEventListener("click",()=>{
     const productID= results.querySelector("#productID").innerHTML.trim()
      window.location.href=`/user/productView/${productID}`
      console.log("outer");
      console.log(productID);
      
      
    }))

    document.querySelectorAll("#Wishlist").forEach(results=>results.addEventListener("click",function(event){
      event.stopPropagation();
    
      const productID= results.querySelector("#productID").innerHTML.trim()

      axios.post("/user/addToWhishlist",{productID}).then(response=>{

        event.target.setAttribute("fill","#FF0000")   

        const Toast = Swal.mixin({
        toast: true,
        position: "top-end",
        showConfirmButton: false,
        timer: 3000,
        timerProgressBar: true,
        didOpen: (toast) => {
          toast.onmouseenter = Swal.stopTimer;
          toast.onmouseleave = Swal.resumeTimer;
        }
      });
      Toast.fire({
        icon: "success",
        title: "product added to wishlist"
      });

    })
    .catch(err => { 

      const Toast = Swal.mixin({
        toast: true,
        position: "top-end",
        showConfirmButton: false,
        timer: 3000,
        timerProgressBar: true,
        didOpen: (toast) => {
          toast.onmouseenter = Swal.stopTimer;
          toast.onmouseleave = Swal.resumeTimer;
        }
      });
      Toast.fire({
        icon: "info",
        title: "already added wishlist"
      });

    })
  }))
    
</script>